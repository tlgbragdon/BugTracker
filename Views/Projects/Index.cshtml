@model IEnumerable<BugTracker.Models.Project>

@{
    ViewBag.Title = "Project Index";
}

<h2>My Projects</h2>

<p>
   @if (User.IsInRole("Administrator") || User.IsInRole("ProjectManager"))
   {
    @Html.ActionLink("Create New", "Create")
   }
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.MediaUrl)
        </th>

        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
       
    </tr>

    @if (Model.Count() == 0)
    {
        <p>You are not assigned to any Projects.</p>
    }

    @foreach (var item in Model) {
    <tr>

        <td>
            @if (item.MediaUrl != null)
            {
                  <img src="@Url.Content(item.MediaUrl)" class="img-thumbnail" alt="project image" width="100" height="100">
                  @*@Html.DisplayFor(modelItem => item.MediaUrl)*@
            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @if (User.IsInRole("Submitter"))
            {
                @Html.ActionLink("Create New Ticket", "Create", "Tickets", new { projectId=item.Id}, null)
                <br />
            }

            @if (User.IsInRole("Administrator") || User.IsInRole("ProjectManager"))
            { 
                @Html.ActionLink("Edit Project", "Edit", new { projId=item.Id }) <span> | </span>
                @Html.ActionLink("View Details", "Details", new { id=item.Id }) 
                @*  | @Html.ActionLink("Delete", "Delete", new { id=item.Id })*@
            }
        </td>
    </tr>
}

</table>
